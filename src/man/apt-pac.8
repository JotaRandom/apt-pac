.TH apt-pac 8 "December 2025" "apt-pac 2026.01.01" "System Administration"
.SH NAME
apt-pac \- APT-style wrapper for pacman package manager
.SH SYNOPSIS
.B apt-pac
[\fIOPTIONS\fR]
.I COMMAND
[\fIARGS\fR...]
.SH DESCRIPTION
.B apt-pac
is a command-line wrapper for
.BR pacman (8)
that provides an APT-like interface for Arch Linux package management. It translates familiar APT commands to their pacman equivalents while adding safety features and improved output formatting.

apt-pac maintains compatibility with APT command syntax while leveraging pacman's capabilities, making it easier for users familiar with Debian-based systems to work with Arch Linux.
.SH COMMANDS
.SS Package Management
.TP
.B update
(pacman -Sy and pacman -Fy)
.br
Update package database
.br
Synchronizes the package databases with the repositories (pacman -Sy). This also automatically updates the files database (pacman -Fy) to enable file search functionality. This command should always be run before an upgrade or install to ensure you have the latest package metadata.
.br
Note: This also syncs AUR metadata if configured (implicit).
.TP
.B upgrade
(pacman -Syu)
.br
Upgrade all installed packages
.br
Performs a full system upgrade (pacman -Syu). It retrieves the latest package lists (if not already up to date) and upgrades all installed packages to their latest available versions.
.br
On Arch Linux, partial upgrades are unsupported, so this command upgrades the entire system.
.br
On Arch Linux, partial upgrades are unsupported, so this command upgrades the entire system.
.br
\fBAUR Support:\fR After the main upgrade, apt-pac checks for updates to installed AUR packages. If found, it prompts to build and install them. Use \fB-y\fR to auto-confirm both system and AUR upgrades.
.br
\fBSelective Upgrades:\fR Use \fB--official\fR to skip AUR checks, or \fB--aur\fR to skip official package upgrades (pacman -Syu). Note that \fBdist-upgrade\fR ignores these flags.
.TP
.B full\-upgrade, dist\-upgrade
(pacman -Syu)
.br
Same as upgrade
.br
In the context of Arch Linux, these are aliases for the standard 'upgrade' command (pacman -Syu). Unlike Debian/APT where 'dist-upgrade' handles changing dependencies smartly, 'pacman -Syu' always handles dependency resolution and upgrades the entire system.
.TP
.B add\-repository
(edits /etc/pacman.conf)
.br
Add a new repository to /etc/pacman.conf.
.br
Provides an interactive guide and helper to add third-party repositories (like Chaotic-AUR) to your system configuration. It will offer to launch your editor to make the necessary changes.
.TP
.B install \fIPACKAGES\fR...
(pacman -S)
.br
Install one or more packages.
.br
\fBAUR Support:\fR If a package is not found in official repositories, apt-pac searches the AUR.
.br
- \fBSmart Providers:\fR Interactive provider selection is enabled for AUR builds.
.br
- \fBGPG Keys:\fR If a build fails due to missing PGP keys, apt-pac will attempt to automatically import them and retry.
.br
Installs the specified packages. It supports hybrid installation from Official Repositories and the Arch User Repository (AUR).
.br
- If a package is in the official repos, it is installed via \fBpacman -S\fR.
.br
- If a package is in the AUR, it is cloned, built, and installed via \fBmakepkg -si\fR (resolving dependencies automatically).
.br
- If a local file path (.pkg.tar.zst) is provided, it installs using \fBpacman -U\fR.
.TP
.B reinstall \fIPACKAGES\fR...
(pacman -S --force)
.br
Reinstall packages
.br
Forces the reinstallation of the specified packages (pacman -S --force). This is useful if files have been corrupted or deleted manually. Use with caution as it overwrites existing files.
.TP
.B remove \fIPACKAGES\fR...
(pacman -R)
.br
Remove packages
.br
Removes the specified packages from the system (pacman -R). This leaves dependencies installed; to remove unused dependencies, use 'autoremove' or 'purge'.
.TP
.B purge \fIPACKAGES\fR...
(pacman -Rns)
.br
Remove packages and their configuration files
.br
Removes the specified packages along with their configuration files and any unneeded dependencies (pacman -Rns). This is the cleanest way to remove a package on Arch Linux, ensuring no orphan dependencies or config files are left behind.
.TP
.B autoremove
(pacman -Rns $(pacman -Qdtq))
.br
Remove orphaned packages that are no longer required
.br
Identifies and removes packages that were installed as dependencies but are no longer required by any installed package (pacman -Rns $(pacman -Qdtq)). This helps keep the system clean of unused libraries and tools.
.TP
.B apt\-mark \fI[auto|manual]\fR \fIPACKAGE\fR...
(pacman -D --asdeps or --asexplicit)
.br
Mark packages as automatically or manually installed.
.br
Modifies the installation reason for the specified packages. 'auto' marks a package as installed as a dependency (pacman -D --asdeps), making it eligible for autoremoval if no other package needs it. 'manual' marks it as explicitly installed (pacman -D --asexplicit), preventing it from being automatically removed.
.TP
.B download \fIPACKAGE\fR...
(pacman -Sw)
.br
Download packages into the cache without installing them.
.br
Retrieves the specified packages from the repositories and saves them to the pacman cache directory (/var/cache/pacman/pkg) without unpacking or installing them (pacman -Sw). Useful for preparing for an offline installation.

.SS Package Information
.TP
.B search \fIQUERY\fR
(pacman -Ss)
.br
Search for packages matching the query
.br
Searches the package database for packages whose names or descriptions match the given query string (pacman -Ss). By default, it searches both official repositories and the AUR.
.br
Use \fB--aur\fR to search only the AUR.
.br
Use \fB--official\fR to search only official repositories.

.TP
.B show \fIPACKAGE\fR
(pacman -Si or pacman -Qi)
.br
Display detailed information about a package
.br
Shows comprehensive details about a package. It attempts to find the package in the following order:
.br
1. Official Repositories (\fBpacman -Si\fR)
.br
2. Locally Installed Database (\fBpacman -Qi\fR)
.br
3. Arch User Repository (AUR RPC)
.br
The output fields are remapped to match standard APT output (e.g. 'Name' becomes 'Package', 'URL' becomes 'Homepage').
.TP
.B news
(feeds.archlinux.org)
.br
Read the latest Arch Linux news
.br
Fetches the latest news from the official Arch Linux RSS feed and displays it in a pager. It intelligently filters items to show only news from the last 6 months, or the single latest item if no recent news exists. Useful for checking for manual intervention requirements before an upgrade.
.TP
.B help \fIPACKAGE\fR
(man \fIPACKAGE\fR)
.br
Display the manual page for a package
.br
Opens the manual page for the specified package (man <package>). If the package is not installed or has no manpage, it will display an error or fallback to suggesting 'apt-pac show'.
.TP
.B list [\fIOPTIONS\fR]
(pacman -Q, -Qu, -Qe, -Sl)
.br
List packages. Supports --installed, --upgradable, --manual-installed, --all-versions, --repo
.br
Lists packages based on the provided flag.
.br
--installed: List all installed packages (pacman -Q).
.br
--upgradable: List packages with available updates (pacman -Qu).
.br
--manual-installed: List explicitly installed packages (pacman -Qe).
.br
--all-versions: List all available packages in repos (pacman -Sl).
.br
--repo: List packages in a specific repository.
.TP
.B depends \fIPACKAGE\fR
(pactree -u or pacman -Qi)
.br
Show package dependencies
.br
Displays the dependency tree for a package. If 'pactree' is available (from pacman-contrib), it shows a visual tree (pactree -u). Otherwise, it lists direct dependencies using pacman -Qi.
.TP
.B rdepends \fIPACKAGE\fR
(pactree -ru or pacman -Sii)
.br
Show reverse dependencies (what depends on this package)
.br
Displays packages that depend on the specified package. If 'pactree' is available, it shows the reverse dependency tree (pactree -ru). Otherwise, it uses 'pacman -Sii' to find dependent packages.
.TP
.B policy \fIPACKAGE\fR
(pacman -Si and pacman -Qi)
.br
Show package version and repository information
.br
Shows the installed version (if any) and the candidate version available in the repositories for a package. Simulates 'apt-cache policy'.
.TP
.B madison \fIPACKAGE\fR
(pacman -Si and pacman -Qi)
.br
Show available package versions
.br
Displays available versions of a package in a table format, showing the repository and version number. Similar to 'apt-cache madison'.
.TP
.B file\-search \fIFILENAME\fR
(pacman -F)
.br
Search for packages containing a specific file
.br
Searches the file database for packages that own the specified file path or filename (pacman -F). Requires the file database to be populated via 'apt-pac update' (which runs pacman -Fy).
.TP
.B changelog \fIPACKAGE\fR
(pacman -Qc)
.br
View the changelog of a package
.br
Displays the changelog for an installed package (pacman -Qc), if available. Note that not all Arch Linux packages currently include changelogs.
.TP
.B scripts \fIPACKAGE\fR
(pacscripts or pacman -Qii)
.br
Display package install/remove scripts
.br
Shows the pre-install, post-install, pre-remove, or post-remove scripts associated with a package. Uses 'pacscripts' if available, or falls back to 'pacman -Qii'. Useful for auditing package behavior.
.TP
.B pkgnames \fI[PREFIX]\fR
(pacman -Slq)
.br
List all available package names, optionally filtered by prefix
.br
Lists every single package name available in the repositories (pacman -Slq). If a prefix argument is provided, only packages starting with that prefix are listed.
.TP
.B dotty \fIPACKAGE\fR
(pactree -g)
.br
Generate a dependency graph in GraphViz format
.br
Generates a DOT graph description of the package's dependencies (pactree -g). This output can be piped to graphviz tools to create visual dependency diagrams. Requires 'pacman-contrib'.

.SS Source Package Management
.TP
.B source \fIPACKAGE\fR
(pkgctl repo clone)
.br
Download package source files using pkgctl
.br
Clone the source repository for a package.
.br
- First checks Official Repositories: uses 'pkgctl repo clone' if available.
.br
- Fallback to AUR: if not in official repos, clones the git repository from the AUR.
.br
Downloads to the cache directory (~/.cache/apt-pac/sources/), ready for building with makepkg.
.TP
.B build\-dep \fIPACKAGE\fR
(pacman -S <makedepends>)
.br
Install build dependencies for a package
.br
Downloads the PKGBUILD for the specified package (from Official or AUR) and automatically installs all packages listed in its 'makedepends' array. Essential for compiling packages from source.
.TP
.B showsrc \fIPACKAGE\fR
(parses PKGBUILD)
.br
Show source package information
.br
Parses the PKGBUILD of a package to display build metadata such as build dependencies (makedepends), architecture, license, and description. Downloads the source if not already cached.

.SS System Maintenance
.TP
.B check
(pacman -Dk and -Qk)
.br
Check for broken dependencies and verify package database integrity
.br
Performs a suite of system health checks. It runs 'pacman -Dk' (database consistency), 'pacman -Qk' (file integrity), and checks for broken library links if 'lddd' is available. Reports any inconsistencies found.
.TP
.B clean
(pacman -Scc)
.br
Remove all cached package files
.br
Clears the entire pacman package cache (pacman -Scc) AND the apt-pac source cache (~/.cache/apt-pac/sources). This aggressively removes ALL downloaded package files and sources. Use when disk space is critically low.
.TP
.B autoclean
(paccache -rk3 or pacman -Sc)
.br
Remove old cached package files
.br
Removes outdated package versions from the cache, keeping only the most recent 3 versions (paccache -rk3) requires 'pacman-contrib'. If 'paccache' is missing, falls back to 'pacman -Sc' which removes all packages not currently installed.
.TP
.B stats
(custom implementation using pacman queries)
.br
Display package statistics
.br
Provides a summary of package statistics, including total packages available, installed count, explicit vs. dependency count, orphans, and cache size.

.SS Configuration
.TP
.B edit\-sources
($EDITOR /etc/pacman.conf)
.br
Edit pacman configuration file
.br
Opens /etc/pacman.conf in the default text editor ($EDITOR). Requires root privileges. This file controls repository mirrors, signature settings, and general pacman options.
.TP
.B config
(cat /etc/pacman.conf)
.br
Display pacman configuration
.br
Outputs the contents of /etc/pacman.conf to stdout. useful for quickly checking enabled repositories or configuration settings.
.TP
.B apt\-key, key \fI[add|del|list]\fR
(pacman-key --add, --delete, --list-keys)
.br
Manage GPG keys for package verification
.br
Wraps 'pacman-key' operations to manage the web of trust:
.br
- \fBadd\fR: Import a key file (\fBpacman-key --add\fR)
.br
- \fBdel\fR: Remove a key by ID (\fBpacman-key --delete\fR)
.br
- \fBlist\fR: List all keys (\fBpacman-key --list-keys\fR)
.TP
.B add\-repository
(Informational)
.br
Display instructions for adding third-party repositories
.br
Displays an informational guide on how to safely adds third-party repositories to /etc/pacman.conf in Arch Linux, noting the differences from Debian's PPA system.

.SH OPTIONS
.TP
.B \-y, \-\-yes, \-\-assume\-yes
Automatically answer yes to prompts. Skips confirmation for package operations.
.TP
.B \-q, \-\-quiet
Produce less output. Can be specified twice (-qq) for minimal output.
.TP
.B \-\-verbose
Produce more detailed output, including the underlying pacman command being executed.
.TP
.B \-s, \-\-simulate, \-\-dry\-run
Perform a simulation of the action without making actual changes.
.TP
.B \-\-download\-only
Download packages without installing them.
.TP
.B \-\-fix\-broken, \-f
Attempt to fix broken dependencies.
.TP
.B \-\-no\-install\-recommends
Skip optional dependencies (informational in pacman context).
.TP
.B \-\-only\-upgrade
Only upgrade packages that are already installed.
.TP
.B \-v, \-\-version [\fITYPE\fR]
Display version information. Optional TYPE: full, pacman
.TP
.B \-\-official
Update/Upgrade only packages from official repositories.
.TP
.B \-\-aur, \-\-aur\-only
Update/Upgrade only packages from the AUR.
.TP
.B \-h, \-\-help
Display help message and exit.

.SH FILES
.TP
.I /etc/apt-pac/config.toml
Global configuration file for apt-pac. Installed with the package and contains system-wide defaults.
.TP
.I ~/.config/apt-pac/config.toml
User-specific configuration file. Auto-created on first run with default values. Overrides global settings.
.TP
.I ~/.cache/apt-pac/sources/abs/
Cache directory for downloaded source packages from official repositories.

.SH CONFIGURATION
apt-pac uses a hierarchical configuration system with TOML format:

.B Global config: 
/etc/apt-pac/config.toml (system-wide defaults)

.B User config:
~/.config/apt-pac/config.toml (overrides global settings)

Configuration values include UI preferences, verbosity levels, safeguard thresholds, and cache directory locations. See the config.toml file for available options.

.SH EXAMPLES
.TP
Update package database:
.B apt-pac update

.TP
Upgrade all packages:
.B apt-pac upgrade

.TP
Install a package:
.B apt-pac install vim

.TP
Search for packages:
.B apt-pac search editor

.TP
Remove a package:
.B apt-pac remove vim

.TP
Show package information:
.B apt-pac show vim

.TP
List installed packages:
.B apt-pac list --installed

.TP
Download package source:
.B apt-pac source bash

.TP
Install build dependencies:
.B apt-pac build-dep bash

.TP
Install with auto-confirmation:
.B apt-pac install -y htop

.TP
Simulate package installation:
.B apt-pac install --simulate neovim

.SH SAFETY FEATURES
apt-pac includes several safety mechanisms:
.IP \(bu 2
Partial upgrade detection and warnings
.IP \(bu 2
Mass removal protection (threshold-based)
.IP \(bu 2
Protected package lists (kernel, bootloader)
.IP \(bu 2
Confirmation prompts for destructive operations
.IP \(bu 2
XDG Base Directory compliance for configuration

.SH ENVIRONMENT
.TP
.B XDG_CONFIG_HOME
Overrides the default configuration directory (~/.config)
.TP
.B XDG_CACHE_HOME
Overrides the default cache directory (~/.cache)
.TP
.B XDG_RUNTIME_DIR
Used for temporary cache when standard cache is unavailable

.SH EXIT STATUS
.TP
.B 0
Success
.TP
.B 1
General error
.TP
.B 2
Command-line syntax error

.SH EASTER EGGS
.TP
.B moo
(apt-get moo)
.br
Ask apt-pac if it has Super Cow Powers.
.br
.TP
.B pacman
(ILoveCandy)
.br
Display a cool Pacman animation.
.br

.SH SEE ALSO
.BR pacman (8),
.BR makepkg (8),
.BR pkgctl (1),
.BR PKGBUILD (5)

.SH BUGS
Report bugs to: https://github.com/JotaRandom/apt-pac/issues

.SH AUTHORS
Written by JotaRandom.

.SH COPYRIGHT
Copyright \(co 2026 JotaRandom. License MIT.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
